<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.5.0 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>How I built this site! - Gcubed</title>




<meta name="description" content="     On This Page  Remember, remember the 5th of November?  Remember, remember the 5th of November?Or, my previous post. Well, if you don’t, in that post I announced the creation of this site, outlined its purpose, and promised to put together an article on how I put together this website, mainly because it was a bit of a pain to find all of the information I needed to setup and self host Jekyll, and I think it would be helpful to have it all in one place for the sake of my sanity and possibly yours.">




<meta name="author" content="Grant Garrett-Grossman">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Gcubed">
<meta property="og:title" content="How I built this site!">


  <link rel="canonical" href="https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/">
  <meta property="og:url" content="https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/">



  <meta property="og:description" content="     On This Page  Remember, remember the 5th of November?  Remember, remember the 5th of November?Or, my previous post. Well, if you don’t, in that post I announced the creation of this site, outlined its purpose, and promised to put together an article on how I put together this website, mainly because it was a bit of a pain to find all of the information I needed to setup and self host Jekyll, and I think it would be helpful to have it all in one place for the sake of my sanity and possibly yours.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-01-05T00:00:00-06:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Grant Garrett-Grossman",
      "url" : "https://ggarrettgrossman.ddns.net",
      "sameAs" : null
    }
  </script>



  <meta name="google-site-verification" content="NKM9sM9laLibi1Vm1V_XF6j1OUu2PX5_dJ3rFr03s8M" />




<!-- end SEO -->


<link href="https://ggarrettgrossman.ddns.net/feed.xml" type="application/atom+xml" rel="alternate" title="Gcubed Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://ggarrettgrossman.ddns.net/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://ggarrettgrossman.ddns.net/">Gcubed</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://ggarrettgrossman.ddns.net/portfolio/">Portfolio</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://ggarrettgrossman.ddns.net/year-archive/">Posts</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://ggarrettgrossman.ddns.net/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://ggarrettgrossman.ddns.net/sitemap/">Sitemap</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Grant Garrett-Grossman</h3>
    
      <p class="author__bio" itemprop="description">
        I am your average bilingual in English and French (shooting for tri with German) computer science major!
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Chicago</span>
        </li>
      

      

      
        <li>
          <a href="mailto:grant.garrettgrossman@gmail.com">
            <meta itemprop="email" content="grant.garrettgrossman@gmail.com" />
            <i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/grant.garrettgrossman@gmail.com" itemprop="sameAs">
            <i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/FakeNameSE" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.stackoverflow.com/users/5255447/fake-name" itemprop="sameAs">
            <i class="fa fa-fw fa-stack-overflow" aria-hidden="true"></i> Stackoverflow
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="How I built this site!">
    <meta itemprop="description" content="     On This Page  Remember, remember the 5th of November?  Remember, remember the 5th of November?Or, my previous post. Well, if you don’t, in that post I announced the creation of this site, outlined its purpose, and promised to put together an article on how I put together this website, mainly because it was a bit of a pain to find all of the information I needed to setup and self host Jekyll, and I think it would be helpful to have it all in one place for the sake of my sanity and possibly yours.">
    <meta itemprop="datePublished" content="January 05, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">How I built this site!
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  15 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-file-text"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#remember-remember-the-5th-of-november" id="markdown-toc-remember-remember-the-5th-of-november">Remember, remember the 5th of November?</a></li>
  <li><a href="#step-one-the-hardware" id="markdown-toc-step-one-the-hardware">Step one, the hardware</a></li>
  <li><a href="#and-now-onto-the-software-end-of-things" id="markdown-toc-and-now-onto-the-software-end-of-things">And now, onto the software end of things…</a>    <ul>
      <li><a href="#the-os" id="markdown-toc-the-os">The OS</a>        <ul>
          <li><a href="#the-install" id="markdown-toc-the-install">The Install</a></li>
          <li><a href="#basic-os-setup" id="markdown-toc-basic-os-setup">Basic OS setup</a>            <ul>
              <li><a href="#update-and-install" id="markdown-toc-update-and-install">Update and install</a></li>
              <li><a href="#setup-your-user" id="markdown-toc-setup-your-user">Setup your user</a></li>
              <li><a href="#setup-ssh" id="markdown-toc-setup-ssh">Setup ssh</a></li>
              <li><a href="#setup-a-firewall" id="markdown-toc-setup-a-firewall">Setup a firewall</a></li>
              <li><a href="#automatic-security-updates" id="markdown-toc-automatic-security-updates">Automatic security updates</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#the-software" id="markdown-toc-the-software">The software</a>        <ul>
          <li><a href="#port-forwarding" id="markdown-toc-port-forwarding">Port forwarding</a></li>
          <li><a href="#getting-a-free-domain-name" id="markdown-toc-getting-a-free-domain-name">Getting a free domain name</a></li>
          <li><a href="#the-web-server" id="markdown-toc-the-web-server">The web-server</a>            <ul>
              <li><a href="#installing-apache" id="markdown-toc-installing-apache">Installing Apache</a></li>
              <li><a href="#configuring-apache-virtualhosts" id="markdown-toc-configuring-apache-virtualhosts">Configuring Apache Virtualhosts</a></li>
            </ul>
          </li>
          <li><a href="#setting-up-https-for-free" id="markdown-toc-setting-up-https-for-free">Setting up https for free!</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#finally-the-actual-website" id="markdown-toc-finally-the-actual-website">Finally, the actual website</a>    <ul>
      <li><a href="#a-quick-intro-to-jekyll" id="markdown-toc-a-quick-intro-to-jekyll">A quick intro to Jekyll</a>        <ul>
          <li><a href="#what-is-jekyll" id="markdown-toc-what-is-jekyll">What is Jekyll?</a></li>
          <li><a href="#how-does-it-work" id="markdown-toc-how-does-it-work">How does it work?</a></li>
          <li><a href="#themes-did-you-say-themes" id="markdown-toc-themes-did-you-say-themes">Themes, did you say themes?</a></li>
        </ul>
      </li>
      <li><a href="#great-but-how-do-i-host-this" id="markdown-toc-great-but-how-do-i-host-this">Great, but how do I host this?</a>        <ul>
          <li><a href="#so-how-do-you-self-host" id="markdown-toc-so-how-do-you-self-host">So how do you self host?</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

  </nav>
</aside>
<h2 id="remember-remember-the-5th-of-november">Remember, remember the 5th of November?</h2>
<p>Or, my previous post. Well, if you don’t, in that post I announced the creation of this site, outlined its purpose, and promised to put together an article on how I put together this website, mainly because it was a bit of a pain to find all of the information I needed to setup and self host Jekyll, and I think it would be helpful to have it all in one place for the sake of my sanity and possibly yours.</p>

<h2 id="step-one-the-hardware">Step one, the hardware</h2>
<p>While I do have and Raspberry Pi Model B+ lying around (used for among other things a personal IRC server), I decided that because this new webserver would be hosting both this website and also an Owncloud installation (a personal cloud server and possibly the subject of another post), it would need to run on something a little beefier. That is where the <a href="http://www.dell.com/us/dfb/p/optiplex-fx160/pd">Dell OptiPlex FX160</a> comes into the picture.</p>

<p>The OptiPlex FX160 is an old thinclient server, meaning that it was used by companies to run Citrix installations  that their employees could remote into. The best part is that a  whole lot of them have flooded  places like Ebay for cheap because it is relatively old hardware that has just gone off lease.</p>

<p>There are a couple of nice things about this box that  led to me picking one up:</p>
<ul>
  <li>They are cheap (I got mine with 3 GB of RAM and a 240 GB hdd for $55, only marginally more than the cost of a Raspberry Pi)</li>
  <li>They are fast:
    <ul>
      <li>Because I can hook up the hdd directly over SATA, the IO bottleneck that made my Pi painfully slow as a webserver is no longer an issue.</li>
      <li>With 3GB of RAM in my case and a 1.2 Ghz Intel Atom, it is pretty snappy.</li>
    </ul>
  </li>
  <li>They are really energy efficient (not much worse than a Pi).</li>
  <li>They are dead silent (fanless).</li>
  <li>They look pretty sexy in my completely subjective opinion.</li>
  <li>And why not?</li>
</ul>

<figure class="half ">
  
    
      <a href="https://ggarrettgrossman.ddns.net/assets/images/FX160-1.jpg">
        <img src="https://ggarrettgrossman.ddns.net/assets/images/FX160-1.jpg" alt="Picture 1 of FX160" />
      </a>
    
  
    
      <a href="https://ggarrettgrossman.ddns.net/assets/images/FX160-2.jpg">
        <img src="https://ggarrettgrossman.ddns.net/assets/images/FX160-2.jpg" alt="Picture 2 of FX160" />
      </a>
    
  
  
    <figcaption>A couple of pictures of my sexy, sexy home server. And yes, I know I am a master photographer.
</figcaption>
  
</figure>

<h2 id="and-now-onto-the-software-end-of-things">And now, onto the software end of things…</h2>
<p>If you were like me and thought that the hardware end seemed a little too easy, welcome to the fun part. First stop, Debian.</p>

<p>I chose Debian because it is fast, lean, and very stable with a wide selection of software. Kind of like Ubuntu without all of the bloat they add to Debian. Anyways, Debian owes being lean to people who take the expression</p>
<blockquote>
  <p>My program is user friendly, it is just very selective about its users</p>
</blockquote>

<p>to heart.</p>

<p>A good example of this is quite simply the fact that it is very likely that the last time the Debian webpage was modified was in the mid 90’s (and yes this is the webpage of the same project that runs much of the world’s banking institutions among other things). For instance, it is laughably difficult to actually find the download links for the Debian iso, so to save you a bit of time (to make up for the time you just spent reading my tangent), here is the <a href="https://cdimage.debian.org/debian-cd/current/amd64/bt-cd/">torrent</a>  link and here is the regular over <a href="https://cdimage.debian.org/debian-cd/current/amd64/iso-dvd/">http</a> download link.</p>

<p>Anyways, it is now time to start setting up and configuring your shiny new Debian system:</p>
<h3 id="the-os">The OS</h3>
<h4 id="the-install">The Install</h4>
<p>Installing Debian is actually pretty easy. Just</p>
<ol>
  <li>Burn the iso to your USB (using dd or unetbootin)</li>
  <li>Plug the USB into your soon to be server</li>
  <li>Turn on the future server and hit the function key that lets you select the media to boot off of</li>
  <li>Select your USB and hit enter</li>
  <li>Select install Debian from the GRUB menu</li>
  <li>Follow the instructions</li>
  <li>Sit back, relax, and enjoy the ride</li>
</ol>

<h4 id="basic-os-setup">Basic OS setup</h4>
<h5 id="update-and-install">Update and install</h5>
<p>First of all, let’s make sure all of our software is up to date:
Log in with <code class="highlighter-rouge">root</code> credentials (we have not set up the normal user with <code class="highlighter-rouge">sudo</code> privileges yet) and run:</p>

<p><code class="highlighter-rouge">apt-get  update &amp;&amp; sudo apt-get upgrade &amp;&amp; sudo apt-get dist-upgrade</code></p>

<p>Then <code class="highlighter-rouge">reboot</code> for good mesure.</p>

<p>Now  what we are going to do is setup ssh so that we can run the server headless:</p>

<p><code class="highlighter-rouge">apt-get install ssh  openssh-server</code></p>

<p>Make sure that your favorite text editor is installed:</p>

<p><code class="highlighter-rouge">apt-get install nano vi</code></p>

<h5 id="setup-your-user">Setup your user</h5>
<p>Now, lets make things more convenient by granting your normal user <code class="highlighter-rouge">sudo</code> privileges:</p>
<ol>
  <li>Install sudo:<code class="highlighter-rouge">apt-get install sudo</code></li>
  <li>Grant privileges: <code class="highlighter-rouge">usermod -aG sudo username</code></li>
  <li>Open your <code class="highlighter-rouge">/etc/sudoers</code> file with <code class="highlighter-rouge">visudo</code> or <code class="highlighter-rouge">nano  /etc/sudoers</code></li>
  <li>Make sure the line under <code class="highlighter-rouge"># Allow members of group sudo to execute any command</code> looks exacly like this: <code class="highlighter-rouge">%sudo   ALL=(ALL:ALL) ALL</code></li>
  <li>Restart the <code class="highlighter-rouge">SSHD</code> server with: <code class="highlighter-rouge">/etc/init.d/sshd restart</code></li>
  <li>Logout and then back in with you new non root user (run <code class="highlighter-rouge">logout</code>)</li>
</ol>

<p class="notice"><strong>Tip</strong>  You  use <code class="highlighter-rouge">ctrl-w</code> with <code class="highlighter-rouge">nano</code> to search the file and <code class="highlighter-rouge">ctrl-x</code> to close it (hit <code class="highlighter-rouge">enter</code> when it asks about the filename and <code class="highlighter-rouge">y</code> to confirm).</p>

<h5 id="setup-ssh">Setup ssh</h5>
<p>Now, lets make things a little more secure by forcing key based authentication for ssh and disabling direct root login:</p>
<ol>
  <li>First disable root logins by opening <code class="highlighter-rouge">/etc/ssh/sshd_config</code> and changing the line <code class="highlighter-rouge">PermitRootLogin</code> to <code class="highlighter-rouge">PermitRootLogin no</code> (you might need to get rid of the <code class="highlighter-rouge">#</code> prefixing it)</li>
  <li>Create a key by running <code class="highlighter-rouge">ssh-keygen -t rsa</code> on the computer you will login in to the server with (make sure to back these  keys up)</li>
  <li>Now run <code class="highlighter-rouge">scp ~/.ssh/id_rsa.pub username@ipofserver:.ssh/authorized_keys</code> (I’m assuming you’re running Linux) on the same computer to copy the public key to your server</li>
  <li>Test by restarting the <code class="highlighter-rouge">sshd</code>server with <code class="highlighter-rouge">/etc/init.d/sshd restart</code> and then trying to login to your server again (on Linux by running on your local machine <code class="highlighter-rouge">ssh username@ipofserver</code>)</li>
  <li>If that worked,  you can now disable password logins by opening <code class="highlighter-rouge">/etc/ssh/sshd_config</code> and changing the line <code class="highlighter-rouge">PasswordAuthentication</code> to <code class="highlighter-rouge">PasswordAuthentication no</code> (you might need to get rid of the <code class="highlighter-rouge">#</code> prefixing it)</li>
</ol>

<p class="notice"><strong>Warning!</strong> If you are considering exposing this server through <code class="highlighter-rouge">ssh</code> to the outside world, you should  look into something like port knocking and authentication rate limiters like  <code class="highlighter-rouge">fail2ban</code>.</p>

<h5 id="setup-a-firewall">Setup a firewall</h5>
<p>Another easy thing you should do to harden your server is setup a basic firewall.
I chose <code class="highlighter-rouge">ufw</code> a wrapper for <code class="highlighter-rouge">iptables</code>, because it is a lot easier to quickly setup and for something like this we don’t need that much configuration</p>
<ol>
  <li>Install <code class="highlighter-rouge">ufw</code> with <code class="highlighter-rouge">sudo apt-get install ufw</code></li>
  <li>Make sure it is configured to handle IPv6 too with <code class="highlighter-rouge">sudo nano /etc/default/ufw</code> and making sure that IPv6 is set to <strong>yes</strong>  with<code class="highlighter-rouge"> IPV6=yes</code></li>
  <li>Lets put together some basic rules: run <code class="highlighter-rouge">sudo ufw default deny incoming</code> and <code class="highlighter-rouge">sudo ufw default allow outgoing</code> to block all incoming connections and allow all outgoing connections from the server</li>
  <li>Now, lets make sure that we don’t lock ourselves out when the firewall is brought up by allowing <code class="highlighter-rouge">ssh</code> (port 22) connections by running <code class="highlighter-rouge">sudo ufw allow ssh</code></li>
  <li>For good measure, enable <code class="highlighter-rouge">http</code> (port 80) connections and <code class="highlighter-rouge">https</code> (port 443) connections with: <code class="highlighter-rouge">sudo ufw allow http</code> and <code class="highlighter-rouge">sudo ufw allow https</code>. That way, we won’t be blocking any web connections when the web server is up and running</li>
  <li>We are now ready to start the firewall with <code class="highlighter-rouge">sudo ufw enable</code></li>
  <li>Check that all of the rules are setup with <code class="highlighter-rouge">sudo ufw status</code>. The output should resemble this:</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>Status: active

To                         Action      From
--                         ------      ----
22                         ALLOW       Anywhere
443                        ALLOW       Anywhere
80                         ALLOW       Anywhere
22                         ALLOW       Anywhere (v6)
443                        ALLOW       Anywhere (v6)
80                         ALLOW       Anywhere (v6)

</code></pre>
</div>

<h5 id="automatic-security-updates">Automatic security updates</h5>
<p>Another good thing to do in order to harden our system, after-all we are going to be exposing it to the internet,  is to setup automatic security updates.</p>

<ol>
  <li>First, we need to install: <code class="highlighter-rouge">sudo apt-get install unattended-upgrades apt-listchanges</code>.
If you get an error about the package not existing, add  the following to the end of <code class="highlighter-rouge">/etc/apt/sources.list</code></li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code># backports
deb http://ftp.debian.org/debian jessie-backports main
</code></pre>
</div>

<ol>
  <li>Next, open <code class="highlighter-rouge">/etc/apt/apt.conf.d/50unattended-upgrades</code> and add the line <code class="highlighter-rouge">Unattended-Upgrade::Mail "root";</code> inside the <code class="highlighter-rouge">Unattended-Upgrade::Origins-Pattern</code> block</li>
  <li>Now, just run <code class="highlighter-rouge">dpkg-reconfigure -plow unattended-upgrades</code> in order to configure <code class="highlighter-rouge">unattended-upgrades</code> (just hit yes when it asks if it should automatically install certain updates</li>
  <li>And we are done!</li>
</ol>

<p>So now the server is a little more hardened and we are ready to install the software for our web-server:</p>

<h3 id="the-software">The software</h3>
<p>In order to get this web-server up and running, there are a couple of pieces of software that we will need to install and confgure. These will be <code class="highlighter-rouge">apache</code> for the actual web-server, a client to update the IP for the server’s domain name, and <code class="highlighter-rouge">certbot</code> for our free SSL certificate.</p>

<h4 id="port-forwarding">Port forwarding</h4>
<p>Firstly, we are going to need to setup port forwarding. This will allow you to expose your server on specified ports to the outside world (which is a little necessary for a web-server).</p>

<p>Depending on your router, you will probably need to go to <code class="highlighter-rouge">10.0.0.1</code>, <code class="highlighter-rouge">192.168.1.1</code>, or <code class="highlighter-rouge">192.168.0.1</code> with your browser. Enter your username and password (if you don’t know it, it is probably either written on your router or the default one which you can find online: <em>in which case change it!</em>).</p>

<p>Now, find the menu for port forwarding (probably under advanced) and set it up to port forward ports <code class="highlighter-rouge">80</code> and <code class="highlighter-rouge">443</code> (<code class="highlighter-rouge">http</code> and <code class="highlighter-rouge">https</code>) to your server’s local IP address which you can get by running <code class="highlighter-rouge">sudo ifconfig</code>.</p>

<h4 id="getting-a-free-domain-name">Getting a free domain name</h4>
<p>Once that is out of the way, you should now get a domain name. This allows people to type in the domain (for instance <code class="highlighter-rouge">www.google.com</code>) and have it redirect to your server’s public  IP address which can change and is harder to remember. While you can pay for a domain name, it is just as easy to get a free, albeit slightly uglier looking one.</p>

<p>Several companies such as <a href="https://www.noip.com/">NoIp</a>  provide free domain names, so you can just go over to one of their websites and follow their instructions to register one and set up a client on your server.</p>

<h4 id="the-web-server">The web-server</h4>
<p>We have finally reached the point where the humble computer gestates into a beautiful web-server. There are a couple of different ways to do this, with<code class="highlighter-rouge">apache</code> and <code class="highlighter-rouge">nginx</code> being the two big solutions. While both work, and <code class="highlighter-rouge">nginx</code> might be a little faster in the context of serving static web pages, in my opinion <code class="highlighter-rouge">apache</code> is <em>waaaaayyyyy</em> easier and quicker to setup, especially if later on you want to setup something like <a href="https://owncloud.org/">Owncloud</a>  (a personal cloud server) later on.</p>
<h5 id="installing-apache">Installing Apache</h5>
<p>First of all, we clearly need to install <code class="highlighter-rouge">apache</code>, which is as easy as running <code class="highlighter-rouge">sudo apt-get install apache2</code>.</p>

<p>You can test that this worked by going to <code class="highlighter-rouge">ipofyourserver</code> with your web-browser.</p>

<h5 id="configuring-apache-virtualhosts">Configuring Apache Virtualhosts</h5>
<p>The next and last thing that we will need to directly configure with <code class="highlighter-rouge">apache</code> is <code class="highlighter-rouge">virtuahosts</code>. These allow you to run multiple websites with different domain names from the same server.</p>

<ol>
  <li>First, we need to create a root direcetoty for your new web-page. Run <code class="highlighter-rouge">sudo mkdir -p /var/www/example.com/public_html</code> with <code class="highlighter-rouge">example.com</code> being the domain name that you picked up earlier.</li>
  <li>Create a demo page for this site by copying the default demo page for <code class="highlighter-rouge">apache</code> wiith
    <div class="highlighter-rouge"><pre class="highlight"><code>sudo cp /var/www/public_html/index.html /var/www/example.com/public_html/index.html
</code></pre>
    </div>
  </li>
  <li>Next up, we need to changethe permissions of this new directotry structure so that <code class="highlighter-rouge">apache</code> will be able to serve our web-page.  Run
    <div class="highlighter-rouge"><pre class="highlight"><code>sudo chgrp -R www-data /var/www/example.com &amp;&amp; sudo chown-R www-data /var/www/example.com &amp;&amp; sudo chmod -R 755 /var/www
</code></pre>
    </div>
  </li>
  <li>At this point, we need to create the <code class="highlighter-rouge">virtualhost</code> file by first copying the default one with
    <div class="highlighter-rouge"><pre class="highlight"><code>sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/example.com.conf
</code></pre>
    </div>
  </li>
  <li>Customize this file by opening it with <code class="highlighter-rouge">sudo nano /etc/apache2/sites-available/example.com.conf</code> and then
    <ol>
      <li>Setting <code class="highlighter-rouge">ServerAdmin admin@example.com</code> to your email</li>
      <li>Setting <code class="highlighter-rouge">ServerName </code> to <code class="highlighter-rouge">example.com</code> (your domain name)</li>
      <li>Changing <code class="highlighter-rouge">DocumentRoot</code> to your root directory which we set earlier to <code class="highlighter-rouge">DocumentRoot /var/www/example.com/public_html</code></li>
    </ol>
  </li>
  <li>Enable this new virtualhost and site with <code class="highlighter-rouge">sudo a2ensite example.com.conf</code></li>
  <li>Restart <code class="highlighter-rouge">apache</code> with <code class="highlighter-rouge">sudo service apache2 restart</code></li>
  <li>Test this configuration by navigating to your domain name from outside your local network (for example using your phone connected with data)</li>
</ol>

<p class="notice"><strong>Tip!</strong>  You  can use <code class="highlighter-rouge">virtualhosts</code> to setup and run multiple websites with different domain names from the same box. Just repeat the same steps for <code class="highlighter-rouge">virtualhosts</code> as above, but change the domain name and root directory. You will probably also need to reconfigure your dynamic ddns client to point your new domain name towards the same box, and also rerun the <code class="highlighter-rouge">certbot</code> step (up next) to have both sites use the same certificate.</p>

<p class="notice"><strong>A word of advice!</strong> If you want access this site from its domain name from inside your network, you will need to modify your <code class="highlighter-rouge">/etc/hosts</code> file if you are running Linux so that that domain resolves to the local IP of your server.</p>

<h4 id="setting-up-https-for-free">Setting up https for free!</h4>
<p>At this point, the web-server is setup and serving a basic page when we connect to it. It even works with a domain name! However, we might want for the sake of security to enable <code class="highlighter-rouge">https</code>, and thanks to the wonderful people from <a href="https://letsencrypt.org/">Let’s Encrypt</a> , it is not only ridiculously easy, but also free.</p>

<p>They even have a great guide <a href="https://certbot.eff.org/#debianjessie-apache">here</a>  that shows you how to obtain that nice, shiny green lock.</p>

<h2 id="finally-the-actual-website">Finally, the actual website</h2>
<p>At last, you are nearing the end of the road. You are just spitting distance away from the random and wise quote, but alas, you have not yet achieved your goal of a beautiful website. You put your faith in me, and I abandon you at this junction with just a pitiful single <code class="highlighter-rouge">html</code> page to show for it. But fear not! I have not forsaken you!</p>

<p>In this part of the tutorial I am going to give you a quick overview of <a href="https://jekyllrb.com/">Jekyll</a> , the system I used to build this site. I will then show you how to self host, using the web-server we just setup, the content you create using Jekyll.</p>

<h3 id="a-quick-intro-to-jekyll">A quick intro to Jekyll</h3>

<h4 id="what-is-jekyll">What is Jekyll?</h4>
<p>So, what is Jekyll? In the words of its creators, (or at least the creators of its website),</p>
<blockquote>
  <p>Jekyll is a simple, blog-aware, static site generator perfect for personal, project, or organization sites.</p>
</blockquote>

<h4 id="how-does-it-work">How does it work?</h4>
<p>Basically, the way it works is you take a preexisting theme (or make your own) that defines  a bunch of <code class="highlighter-rouge">layouts</code> (reformatted pages) and <code class="highlighter-rouge">includes</code> (snippets of code to include in pages). You then write your content mainly in markdown and specify which <code class="highlighter-rouge">layouts</code> and <code class="highlighter-rouge">included</code> to use. <code class="highlighter-rouge">Jekyll</code> then compiles your page into <code class="highlighter-rouge">html</code> and <code class="highlighter-rouge">css</code>that the server will serve.</p>

<h4 id="themes-did-you-say-themes">Themes, did you say themes?</h4>
<p>The great thing aout Jekyll is that it is pretty widely used, so there is no shortage of free, open source, and sexy themes. If you google <code class="highlighter-rouge">jekyll themes</code>, you’ll get a bunch of pages of themes like <a href="http://jekyllthemes.org/">this one</a>  and <a href="http://themes.jekyllrc.org/">this one</a>  with  massive lists of themes. Check a few out, and then just follow the instructions on its webpage to use the theme of your dreams. Jekyll and most themes have pretty good documentation, so between the two of them, you should be pretty well set for building your site.</p>

<p>For reference, the theme I used for this site is called <a href="https://github.com/mmistakes/minimal-mistakes">Minimal Mistakes</a>.</p>

<p class="notice"><strong>Some words of wisdom!</strong> In case the documentation does not make it clear, you do all of your development of your webpage on your computer and only push the final compiled result to the server.</p>

<h3 id="great-but-how-do-i-host-this">Great, but how do I host this?</h3>
<p>So, you just put together a sexy, sexy site, the most beautiful to ever grace the interwebs, but wait, how do you actually put this on the interwebs? You may have noticed that the bulk of the explanations for hosting your Jekyll page involve using Github Pages, but you’re here because you want to do this yourself.</p>
<blockquote>
  <p>Github, we don’t need no stinkin Github! 
<cite> A famous movie or something </cite></p>
</blockquote>

<h4 id="so-how-do-you-self-host">So how do you self host?</h4>
<p>It is actually pretty simple. You just have to push the contents of <code class="highlighter-rouge">_site</code> to your root directory of your web server. The easiest way to do this is to do all of your development on your local machine, and then open your terminal inside the root directory of your Jekyll site (where you can see all of the files and directories starting with <code class="highlighter-rouge">_</code>). Then, just run the following to copy the contents of <code class="highlighter-rouge">_site</code> onto your server:</p>
<div class="highlighter-rouge"><pre class="highlight"><code> jekyll build --destination _site &amp;&amp; scp -r ./_site/* username@ipofserver:site
</code></pre>
</div>
<p>If that gave you a <code class="highlighter-rouge">directory does not exist</code> error, run <code class="highlighter-rouge">mkdir ~/site</code> on your server first.</p>

<p>After that, move these files to the root directory of your website (get rid of the demo file first) with:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo cp -rv site/* /var/www/example.com/public_html/
</code></pre>
</div>

<p>Now, fix the file permissions with:</p>
<div class="highlighter-rouge"><pre class="highlight"><code>sudo chgrp -R www-data /var/www/example.com/public_html
sudo chown -R www-data /var/www/example.com/public_html
</code></pre>
</div>

<p>And <em>presto</em>, you are done!</p>

<p class="notice"><strong>Some words of wisdom!</strong> Whenever you want to do this again (say, when you update your site), make sure you delete the contents of <code class="highlighter-rouge">~/site</code> on your server before you rerun all of these steps starting with <code class="highlighter-rouge">scp</code>.</p>

<p class="notice"><strong>Some more advice to spare you the hair pulling!</strong>  If after transferring your built site to the server you get weird looking pages and a bunch of <code class="highlighter-rouge">404</code> messages, make sure that you only copied the contents of <code class="highlighter-rouge">_site</code> into your root web directory and not the directory itself.</p>

<p>And so, it is  now time to part ways. Good luck on your journey to build your own website, and I hope this post helped you maintain a little but of sanity.</p>

<p>I’m not quite sure what my next post will be right now, but I’m thinking some game theory is coming up…</p>

<p>Until then, good luck and good day to you!</p>

<blockquote>
  <p>
    The more you find out about the world, the more opportunities there are to laugh at it.
  </p>
  <footer><cite title="Bill Nye the Science Guy">Bill Nye the Science Guy</cite></footer>
</blockquote>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/tags/#jekyll" class="page__taxonomy-item" rel="tag">jekyll</a><span class="sep">, </span>
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/tags/#linux" class="page__taxonomy-item" rel="tag">linux</a><span class="sep">, </span>
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/tags/#server" class="page__taxonomy-item" rel="tag">server</a><span class="sep">, </span>
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/tags/#this-website" class="page__taxonomy-item" rel="tag">this website</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/categories/#tutorial" class="page__taxonomy-item" rel="tag">tutorial</a><span class="sep">, </span>
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/categories/#webdev" class="page__taxonomy-item" rel="tag">webdev</a><span class="sep">, </span>
    
      
      
      <a href="https://ggarrettgrossman.ddns.net/categories/#website" class="page__taxonomy-item" rel="tag">website</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-01-05T00:00:00-06:00">January 05, 2017</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=How I built this site! https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://ggarrettgrossman.ddns.net/website/webdev/tutorial/building-of-new-site/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://ggarrettgrossman.ddns.net/website/new-site/" class="pagination--pager" title="Guess what: A brand new website!
">Previous</a>
    
    
      <a href="https://ggarrettgrossman.ddns.net/webdev/tutorial/custom-404-message/" class="pagination--pager" title="Sexy, sexy custom 404 pages with Apache
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/FakeNameSE"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://ggarrettgrossman.ddns.net/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Grant Garrett-Grossman. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    <script src="https://ggarrettgrossman.ddns.net/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-100808759-1', 'auto');
  ga('send', 'pageview');
</script>







  </body>
</html>
